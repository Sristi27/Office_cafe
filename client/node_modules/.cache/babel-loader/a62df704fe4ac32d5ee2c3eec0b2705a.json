{"ast":null,"code":"export const reducer = (state, action) => {\n  //default action passed initially\n  //state undefined initially\n  //2 return options\n  //old state or updated state\n  // console.log({state,action})\n  if (action.type == 'DECREASE_ITEM') {\n    let flag = false;\n    let existedItem = state.menu.find(item => item.objectId == action.payload); //find that item and den decrease    \n\n    let newmenu = state.cart.filter(item => item.objectId != action.payload);\n    let items = [...state.menu];\n    let newItems = items.filter(item => {\n      if (item.objectId === action.payload) {\n        item.quantity -= 1;\n        if (item.quantity == 0) flag = true;\n      }\n\n      return item;\n    }); //if quantity is 0 dont return that item in the menu\n\n    if (flag) {\n      return { ...state,\n        cart: newmenu,\n        amount: state.amount - existedItem.Price,\n        total: state.total - 1\n      };\n    } //else return the updated menu\n    else {\n        return { ...state,\n          cart: newItems,\n          amount: state.amount - existedItem.Price,\n          total: state.total - 1\n        };\n      }\n  }\n\n  if (action.type == 'INCREASE_ITEM') {\n    let addedItem = state.menu.find(item => item.objectId == action.payload);\n    let items = [...state.cart];\n    let newItems = items.filter(item => {\n      if (item.objectId === action.payload) {\n        item.quantity += 1;\n      }\n\n      return item;\n    });\n    return { ...state,\n      cart: newItems,\n      amount: state.amount + addedItem.Price,\n      total: state.total + 1\n    };\n  }\n\n  if (action.type == 'CLEAR_CART') {\n    return { ...state,\n      cart: [],\n      total: 0,\n      amount: 0\n    };\n  }\n\n  if (action.type === \"ADD_TO_CART\") {\n    // console.log(state.cart,state.menu)\n    let addedItem = state.menu.find(item => item.objectId === action.payload);\n    let existedItem = state.cart.find(item => item.objectId === action.payload); // console.log(addedItem,existedItem)\n\n    if (existedItem) {\n      let newmenu = state.cart.filter(item => item.objectId != action.payload); ///takes out newly added item\n\n      existedItem.quantity = existedItem.quantity + 1;\n      newmenu.push(existedItem);\n      return { ...state,\n        cart: newmenu,\n        amount: state.amount + addedItem.Price,\n        total: state.total + 1\n      };\n    } else {\n      addedItem = { ...addedItem,\n        quantity: 1\n      };\n      return { ...state,\n        cart: [...state.cart, addedItem],\n        amount: state.amount + addedItem.Price,\n        total: state.total + 1\n      };\n    }\n  }\n\n  if (action.type == 'REMOVE_ITEM') {\n    let itemToRemove = state.menu.find(item => item.objectId === action.payload);\n    let new_items = state.cart.filter(item => item.objectId != action.payload); //calculating the total\n\n    let newTotal = state.total - itemToRemove.quantity; //calculate amount\n\n    let newAmount = state.amount - itemToRemove.Price * itemToRemove.quantity;\n    console.log(itemToRemove);\n    return { ...state,\n      cart: new_items,\n      total: newTotal,\n      amount: newAmount\n    };\n  } ///as a default always return the original stae(old state-before updation)\n\n\n  return state;\n};","map":{"version":3,"sources":["/Users/sristichowdhury/Desktop/projects/stack-hack/client/src/reducer.js"],"names":["reducer","state","action","type","flag","existedItem","menu","find","item","objectId","payload","newmenu","cart","filter","items","newItems","quantity","amount","Price","total","addedItem","push","itemToRemove","new_items","newTotal","newAmount","console","log"],"mappings":"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","sourcesContent":["export const reducer = (state,action) =>\n{\n\n  //default action passed initially\n  //state undefined initially\n\n  //2 return options\n  //old state or updated state\n  // console.log({state,action})\n\n\n  if(action.type=='DECREASE_ITEM')\n  {\n    let flag=false;\n    let existedItem=state.menu.find(item=>item.objectId==action.payload)\n\n    //find that item and den decrease    \n    let newmenu = state.cart.filter(item => item.objectId != action.payload);\n    let items = [...state.menu];\n    let newItems = items.filter((item) => {\n          if (item.objectId === action.payload) {\n              item.quantity-=1;\n              if(item.quantity==0)\n              flag=true;\n            }\n\n            return item;\n        });\n    \n        //if quantity is 0 dont return that item in the menu\n      if(flag)\n      {\n        return {...state,\n          cart:newmenu,\n          amount:state.amount-existedItem.Price,\n          total:state.total-1\n        }}\n      \n        //else return the updated menu\n      else\n      {\n        return {...state,\n        cart:newItems,\n        amount:state.amount-existedItem.Price,\n        total:state.total-1}}\n    \n  }\n\n  if(action.type=='INCREASE_ITEM')\n  {\n    let addedItem=state.menu.find(item=>item.objectId==action.payload)\n    let items = [...state.cart];\n    \n    let newItems = items.filter((item) => {\n          if (item.objectId === action.payload) {\n              item.quantity+=1;\n            }\n\n            return item;\n        });\n    \n    return {...state,\n        cart:newItems,\n        amount:state.amount+addedItem.Price,\n        total:state.total+1}\n  }\n\n\n\n  if(action.type=='CLEAR_CART')\n  {\n    return{\n            ...state,\n            cart: [],\n            total: 0,\n            amount:0\n          }\n  }\n\n\n  if(action.type===\"ADD_TO_CART\")\n  {\n    // console.log(state.cart,state.menu)\n    let addedItem=state.menu.find(item=>item.objectId===action.payload);\n    let existedItem=state.cart.find(item=>item.objectId===action.payload);\n    // console.log(addedItem,existedItem)\n    if(existedItem)\n    {\n      let newmenu = state.cart.filter(item => item.objectId != action.payload);\n      ///takes out newly added item\n      existedItem.quantity = existedItem.quantity+1;\n      newmenu.push(existedItem);\n\n      return {...state,\n        cart:newmenu,\n        amount:state.amount+addedItem.Price,\n        total:state.total+1\n      }\n    }\n    else\n    {\n       addedItem={...addedItem,quantity:1}\n       return {...state,\n        cart:[...state.cart,addedItem],\n        amount:state.amount+addedItem.Price,\n        total:state.total+1\n      }\n    }\n  }\n\n  if(action.type=='REMOVE_ITEM')\n  {\n    let itemToRemove= state.menu.find(item=>item.objectId===action.payload)\n    let new_items = state.cart.filter(item=> item.objectId!=action.payload)\n        \n    //calculating the total\n    let newTotal = state.total - (itemToRemove.quantity )\n    //calculate amount\n    let newAmount = state.amount - (itemToRemove.Price * itemToRemove.quantity )\n    console.log(itemToRemove)\n    return{\n            ...state,\n            cart: new_items,\n            total: newTotal,\n            amount:newAmount\n          }\n  }\n\n  \n  ///as a default always return the original stae(old state-before updation)\n  return state;\n}"]},"metadata":{},"sourceType":"module"}